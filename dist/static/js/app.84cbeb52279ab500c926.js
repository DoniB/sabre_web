webpackJsonp([6],{"+0ln":function(e,t){},"4+hh":function(e,t){},"5LpN":function(e,t){},"77D8":function(e,t){},"7srP":function(e,t){},"8Z2Z":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var i=function(e){return e.toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g,"-").toLowerCase().replace(/&/g,"-e-").replace(/[^a-z0-9-]/g,"").replace(/-+/g,"-").replace(/^-*/,"").replace(/-*$/,"")}},HpXc:function(e,t){},NCSP:function(e,t,a){"use strict";var i={props:{recipeId:{required:!0,type:Number},mdMini:{default:!1,type:Boolean}},data:function(){return{favorite:!1,disableButton:!1}},methods:{setFavorite:function(){var e=this;this.disableButton=!0,this.favorite?this.remote.recipes.favorite.delete(this.recipeId,this.$store.state.secureToken,function(t){e.favorite=t.data.favorite,e.disableButton=!1},function(e){return console.log(e)}):this.remote.recipes.favorite.create(this.recipeId,this.$store.state.secureToken,function(t){e.favorite=t.data.favorite,e.disableButton=!1},function(e){return console.log(e)})}},created:function(){var e=this;this.remote.recipes.favorite.show(this.recipeId,this.$store.state.secureToken,function(t){e.favorite=t.data.favorite},function(e){return console.log(e)})}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("md-button",{staticClass:"md-fab md-fab-top-right md-accent",class:{"md-mini":this.mdMini},attrs:{disabled:this.disableButton},on:{click:this.setFavorite}},[t("md-icon",[this._v(this._s(this.favorite?"favorite":"favorite_border"))])],1)},staticRenderFns:[]},n=a("VU/8")(i,r,!1,null,null,null);t.a=n.exports},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={};a.d(i,"loadUser",function(){return g}),a.d(i,"unloadUser",function(){return _});var r,n=a("7+uW"),s=a("K/Lq"),o=a.n(s),d=a("Lgyv"),c=a.n(d),u=a("Dd8w"),l=a.n(u),m=a("NYxO"),p=a("YaEn"),f=a("bOdI"),v=a.n(f),h=(r={},v()(r,"USERNAME",function(e,t){e.username=t}),v()(r,"EMAIL",function(e,t){e.email=t}),v()(r,"IS_LOGGED",function(e,t){e.isLogged=t}),v()(r,"SECURE_TOKEN",function(e,t){e.secureToken=t}),v()(r,"IS_ADMIN",function(e,t){e.isAdmin=t}),r),g=function(e,t){var a=e.commit;a("USERNAME",t.username),a("EMAIL",t.email),a("IS_LOGGED",!0),a("SECURE_TOKEN",t.token),a("IS_ADMIN",t.is_admin)},_=function(e){var t=e.commit;t("USERNAME",""),t("EMAIL",""),t("IS_LOGGED",!1),t("SECURE_TOKEN",""),t("IS_ADMIN",!1)};n.default.use(m.a);var b=new m.a.Store({state:{username:"",email:"",isLogged:!1,secureToken:"",isAdmin:!1},mutations:h,actions:i}),C=a("8Z2Z"),k={data:function(){return{categories:{}}},methods:{friendlyUrl:function(e){return Object(C.a)(e)}},created:function(){var e=this;this.remote.categories.index(function(t){e.categories=t.data},function(e){return console.log("error loading categories at header",e)})}},y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.categories,function(t){return a("md-button",{key:"hcat"+t.id,attrs:{to:{name:"category",params:{id:t.id,friendlyUrl:e.friendlyUrl(t.name)}}}},[e._v("\n    "+e._s(t.name)+"\n  ")])}))},staticRenderFns:[]};var w=a("VU/8")(k,y,!1,function(e){a("NsbN")},"data-v-7c22458c",null).exports,$=a("mtWM");p.a.beforeEach(function(e,t,a){e.matched.some(function(e){return e.meta.requiresAuth})?b.state.isLogged?a():a({path:"/sign",query:{redirect:e.fullPath}}):a()});var q={name:"App",data:function(){return{query:"",showCategoryBar:"true",recipesOnly:!1,showRecipesOnly:!1}},methods:l()({},Object(m.b)(["unloadUser","loadUser"]),{logOut:function(){this.unloadUser(),this.$cookie.delete("SecureToken"),p.a.currentRoute.meta.requiresAuth&&p.a.push({path:"/sign",query:{redirect:p.a.currentRoute.fullPath}})},doLogin:function(e){if(this.loadUser(e.data),"sign"===this.$route.name){var t=this.$route.query.redirect;t?p.a.push(t):p.a.push("/")}},search:function(){p.a.push({name:"index",query:{q:this.query}})},findComma:function(e){this.showRecipesOnly=e.indexOf(",")>=0}}),created:function(){var e=this.$cookie.get("SecureToken");e?$.get("https://sabre-api.herokuapp.com/api/v1/user",{headers:{"X-Secure-Token":e}}).then(this.doLogin).catch(this.logOut):console.log("no secure token"),this.query=this.$route.query.q},computed:{firstname:function(){return this.$store.state.username.split(" ")[0]}},components:{Categories:w},watch:{$route:function(e,t){e.query.q!==t.query.q&&(this.query=this.$route.query.q),this.showCategoryBar=!e.meta.requiresAuth}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-container",attrs:{id:"app"}},[a("md-toolbar",{staticClass:"md-medium"},[a("div",{staticClass:"md-toolbar-section-start"},[a("router-link",{attrs:{to:"/"}},[a("h3",{staticClass:"md-title"},[e._v("SABRE")])]),e._v(" "),a("md-button",{attrs:{to:"/"}},[a("md-icon",[e._v("home")]),e._v(" Inicio")],1)],1),e._v(" "),a("div",{attrs:{id:"search"}},[a("md-field",[a("label",[e._v("Separe ingredientes com virgula")]),e._v(" "),a("md-input",{staticClass:"md-default",attrs:{placeholder:"Procurar receitas"},on:{keypress:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.search(t):null},input:e.findComma},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}}),e._v(" "),e.showRecipesOnly?a("md-checkbox",{model:{value:e.recipesOnly,callback:function(t){e.recipesOnly=t},expression:"recipesOnly"}},[e._v("Só com estes ingredientes")]):e._e(),e._v(" "),a("md-button",{staticClass:"md-icon-button",on:{click:e.search}},[a("md-icon",[e._v("search")])],1)],1)],1),e._v(" "),a("div",{staticClass:"md-toolbar-section-end"},[a("md-button",{staticClass:"md-default",attrs:{to:"/painel/enviar-receita"}},[a("md-icon",[e._v("restaurant_menu")]),e._v(" Enviar Receita ")],1),e._v(" "),e.$store.state.isLogged?a("md-menu",{attrs:{"md-align-trigger":""}},[a("md-button",{staticClass:"md-default",attrs:{"md-menu-trigger":""}},[a("md-icon",[e._v("perm_identity")]),e._v(" "+e._s(e.firstname))],1),e._v(" "),a("md-menu-content",[a("md-menu-item",{staticClass:"menu-link",attrs:{to:"/painel"}},[e._v("Minha Conta")]),e._v(" "),a("md-menu-item",{on:{click:e.logOut}},[e._v("Sair")])],1)],1):a("md-button",{staticClass:"md-default",attrs:{to:"/sign"}},[a("md-icon",[e._v("perm_identity")]),e._v(" Entrar")],1)],1)]),e._v(" "),e.showCategoryBar?a("md-toolbar",{staticClass:"md-primary md-medium"},[a("categories")],1):e._e(),e._v(" "),a("div",{staticClass:"md-layout router-body"},[a("div",{staticClass:"md-layout-item md-size-100"},[a("router-view")],1)])],1)},staticRenderFns:[]};var R=a("VU/8")(q,x,!1,function(e){a("r3Yp")},"data-v-16e60730",null).exports,S=a("mtWM"),E=a.n(S),M="https://sabre-api.herokuapp.com/api/v1",A={users:{recipe:{show:function(e,t,a,i){E.a.get(M+"/users/recipe/"+t,{headers:{"X-Secure-Token":e}}).then(a).catch(function(e){i&&i(e)})},create:function(e,t,a,i){E.a.post(M+"/users/recipe",t,{headers:{"X-Secure-Token":e}}).then(function(e){return a(e)}).catch(function(e){i&&i(e)})},update:function(e,t,a,i){var r={name:t.name,ingredients:t.ingredients,directions:t.directions,status:t.status};t.cover&&(r.cover=t.cover),E.a.patch(M+"/users/recipe/"+t.id,r,{headers:{"X-Secure-Token":e}}).then(a).catch(function(e){i&&i(e)})},index:function(e,t,a,i){E.a.get(M+"/users/recipe",{params:t,headers:{"X-Secure-Token":e}}).then(a).catch(function(e){i&&i(e)})}},favorites:{index:function(e,t,a){E.a.get(M+"/users/favorites",{headers:{"X-Secure-Token":e}}).then(t).catch(function(e){a&&a(e)})}}},recipes:{index:function(e,t,a){E.a.get(M+"/recipes",{params:e}).then(t).catch(function(e){a&&a(e)})},comments:{create:function(e,t,a,i,r){E.a.post(M+"/recipes/"+t+"/comments",{text:a},{headers:{"X-Secure-Token":e}}).then(function(e){return i(e)}).catch(function(e){r&&r(e)})},index:function(e,t,a){E.a.get(M+"/recipes/"+e+"/comments").then(function(e){return t(e)}).catch(function(e){a&&a(e)})},delete:function(e,t,a,i){E.a.delete(M+"/recipes/"+t.recipe_id+"/comments/"+t.id,{headers:{"X-Secure-Token":e}}).then(function(e){return a(e)}).catch(function(e){i&&i(e)})}},rating:{show:function(e,t,a,i){E.a.get(M+"/recipes/"+e+"/rating",{headers:{"X-Secure-Token":t}}).then(function(e){return a(e)}).catch(function(e){i&&i(e)})},create:function(e,t,a,i,r){E.a.post(M+"/recipes/"+e+"/rating",{stars:t},{headers:{"X-Secure-Token":a}}).then(function(e){return i(e)}).catch(function(e){r&&r(e)})}},favorite:{create:function(e,t,a,i){E.a.post(M+"/recipes/"+e+"/favorite",{},{headers:{"X-Secure-Token":t}}).then(function(e){return a(e)}).catch(function(e){i&&i(e)})},show:function(e,t,a,i){E.a.get(M+"/recipes/"+e+"/favorite",{headers:{"X-Secure-Token":t}}).then(function(e){return a(e)}).catch(function(e){i&&i(e)})},delete:function(e,t,a,i){E.a.delete(M+"/recipes/"+e+"/favorite",{headers:{"X-Secure-Token":t}}).then(function(e){return a(e)}).catch(function(e){i&&i(e)})}}},categories:{index:function(e,t){E.a.get(M+"/categories").then(function(t){return e(t)}).catch(function(e){t&&t(e)})}},adm:{users:{index:function(e,t,a,i,r){var n="?page="+t;a&&(n+="&q="+a),E.a.get(M+"/adm/users"+n,{headers:{"X-Secure-Token":e}}).then(function(e){return i(e)}).catch(function(e){r&&r(e)})},show:function(e,t,a,i){E.a.get(M+"/adm/users/"+t,{headers:{"X-Secure-Token":e}}).then(function(e){return a(e)}).catch(function(e){i&&i(e)})},update:function(e,t,a,i){var r={username:t.username,email:t.email,is_admin:t.is_admin,active:t.active};t.password&&(r.password=t.password),E.a.patch(M+"/adm/users/"+t.id,r,{headers:{"X-Secure-Token":e}}).then(function(e){return a(e)}).catch(function(e){i&&i(e)})},create:function(e,t,a,i){E.a.post(M+"/adm/users",t,{headers:{"X-Secure-Token":e}}).then(function(e){return a(e)}).catch(function(e){i&&i(e.response)})}}}},U={computed:{remote:function(){return A}}},F={methods:{isAuth:function(){return!!this.$cookie.get("SecureToken")}}},L=a("EqLo");a("4+hh"),a("giDI");n.default.use(L.MdButton),n.default.use(L.MdContent),n.default.use(L.MdTabs),n.default.use(L.MdToolbar),n.default.use(L.MdIcon),n.default.use(L.MdCard),n.default.use(L.MdField),n.default.use(L.MdProgress),n.default.use(L.MdSnackbar),n.default.use(o.a),n.default.use(L.MdMenu),n.default.use(L.MdList),n.default.use(L.MdApp),n.default.use(L.MdDrawer),n.default.use(L.MdRadio),n.default.use(L.MdDivider),n.default.use(c.a),n.default.mixin(U),n.default.mixin(F),n.default.config.productionTip=!1,new n.default({el:"#app",router:p.a,store:b,components:{App:R},template:"<App/>"})},NOwC:function(e,t){},NsbN:function(e,t){},QwKG:function(e,t){},VxmP:function(e,t,a){"use strict";var i=a("8Z2Z"),r=a("X+2x"),n=a.n(r),s=a("NCSP"),o={mixins:[a("rEVH").a],props:{recipe:{type:Object,required:!0},showAdminEdit:{type:Boolean,default:!1}},computed:{ingredients:function(){var e="";return this.recipe.ingredients.split("\n").forEach(function(t){e+="<p>"+t+"</p>"}),e},friendlyUrl:function(){return Object(i.a)(this.recipe.name)},cover:function(){return this.recipe.cover||"/static/img/demo.jpg"}},components:{StarRating:n.a,FavoriteButton:s.a}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("md-card",[a("favorite-button",{staticClass:"favorite-button",attrs:{recipeId:e.recipe.id,mdMini:!0}}),e._v(" "),a("md-card-media",[a("img",{attrs:{src:e.cover,alt:"Receita"}})]),e._v(" "),a("md-card-header",[a("div",{staticClass:"md-title"},[e._v(e._s(e.recipe.name))]),e._v(" "),a("div",{staticClass:"md-subhead"},[e._v(e._s(e.recipe.owner))]),e._v(" "),a("div",{staticClass:"md-subhead recipe-date"},[e._v(e._s(e._f("timePassed")(e.recipe.created_at)))]),e._v(" "),a("div",{staticClass:"md-layout md-alignment-top-right"},[a("star-rating",{attrs:{rating:e.recipe.average_stars,"star-size":20,"rounded-corners":"","show-rating":!1,padding:1,"read-only":""}})],1)]),e._v(" "),a("md-card-expand",[a("md-card-actions",{attrs:{"md-alignment":"space-between"}},[a("div",[1===e.recipe.status?a("md-button",{attrs:{to:{name:"recipe.show",params:{id:e.recipe.id,friendlyUrl:e.friendlyUrl}}}},[e._v("Receita")]):e._e(),e._v(" "),e.showAdminEdit?a("md-button",{attrs:{to:{name:"dashboard.recipes.edit",params:{id:e.recipe.id}}}},[e._v("Editar")]):e._e()],1),e._v(" "),a("md-card-expand-trigger",{on:{click:function(t){e.showRecipe=!e.showRecipe}}},[a("md-button",[e._v("Ingredientes")])],1)],1),e._v(" "),a("md-card-expand-content",[a("md-card-content",{domProps:{innerHTML:e._s(e.ingredients)}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(o,d,!1,function(e){a("7srP")},"data-v-b6312166",null);t.a=c.exports},YaEn:function(e,t,a){"use strict";var i=a("7+uW"),r=a("/ocq"),n=a("VxmP"),s=a("ks6x"),o={name:"index",data:function(){return{recipes:[],isLoading:!0,isLoadingMore:!1,hasMore:!1,page:0}},components:{recipeCard:n.a,loading:s.a},methods:{setRecipes:function(e){var t=this;e.data.forEach(function(e){t.recipes.push(e)}),this.isLoading=!1,this.isLoadingMore=!1,this.hasMore=20===e.data.length,this.page++},loadRecipes:function(){this.isLoadingMore=!0;var e={page:this.page};this.$route.query.q&&(e.q=this.$route.query.q),this.$route.params.id&&(e.category=this.$route.params.id),this.remote.recipes.index(e,this.setRecipes,function(e){console.log(e)})}},created:function(){this.loadRecipes()},watch:{$route:function(e,t){this.isLoading=!0,this.recipes=[],this.page=0,this.loadRecipes({q:e.query.q})}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.isLoading?a("loading"):a("div",{staticClass:"md-layout md-alignment-top-center"},e._l(e.recipes,function(e){return a("recipe-card",{key:e.id,attrs:{recipe:e}})})),e._v(" "),e.hasMore?a("div",[a("p",{staticStyle:{"text-align":"center"}},[a("md-button",{staticClass:"md-accent",attrs:{disabled:e.isLoadingMore},on:{click:e.loadRecipes}},[e._v("Mais Receitas "),a("md-icon",[e._v("expand_more")])],1)],1)]):e._e()],1)},staticRenderFns:[]},c=a("VU/8")(o,d,!1,null,null,null).exports,u=a("Dd8w"),l=a.n(u),m=a("ESwS"),p=a("+cKO"),f=a("NYxO"),v=a("mtWM"),h={name:"sign-up",mixins:[m.validationMixin],data:function(){return{showSnackbar:!1,form:{username:"",email:"",password:"",password_confirmation:""},sending:!1}},methods:l()({validateUser:function(){this.$v.$touch(),this.$v.$invalid||(this.sending=!0,this.createUser())},getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},createUser:function(){var e=this;v.post("https://sabre-api.herokuapp.com/api/v1/user",{username:this.form.username,email:this.form.email,password:this.form.password,password_confirmation:this.form.password_confirmation}).then(function(t){return e.userCreated(t)}).catch(this.requestError)},userCreated:function(e){this.loadUser(e.data),this.$cookie.set("SecureToken",e.data.token,30);var t=this.$route.query.redirect;t?z.push(t):z.push("/")},requestError:function(){this.sending=!1,this.showSnackbar=!0}},Object(f.b)(["loadUser"])),validations:{form:{username:{required:p.required,minLength:Object(p.minLength)(3)},email:{required:p.required,email:p.email},password:{required:p.required,minLength:Object(p.minLength)(6)},password_confirmation:{required:p.required,sameAs:Object(p.sameAs)("password")}}},created:function(){this.$store.state.isLogged&&z.push("/")}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-medium-size-100"},[a("md-field",{class:e.getValidationClass("username")},[a("label",{attrs:{for:"username"}},[e._v("Nome: ")]),e._v(" "),a("md-input",{attrs:{name:"username",autocomplete:"name",id:"username",disabled:e.sending},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),e._v(" "),e.$v.form.username.required?e.$v.form.username.minLength?e._e():a("span",{staticClass:"md-error"},[e._v("É necessário informar o nome valido")]):a("span",{staticClass:"md-error"},[e._v("É necessário informar o nome")])],1)],1),e._v(" "),a("div",{staticClass:"md-layout-item md-medium-size-100"},[a("md-field",{class:e.getValidationClass("email")},[a("label",{attrs:{for:"email"}},[e._v("E-mail: ")]),e._v(" "),a("md-input",{attrs:{type:"email",name:"email",autocomplete:"email",id:"email",disabled:e.sending},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),e.$v.form.email.required?e.$v.form.email.email?e._e():a("span",{staticClass:"md-error"},[e._v("É necessário informar um e-mail valido")]):a("span",{staticClass:"md-error"},[e._v("É necessário informar um e-mail")])],1)],1),e._v(" "),a("div",{staticClass:"md-layout-item md-medium-size-100"},[a("md-field",{class:e.getValidationClass("password")},[a("label",{attrs:{for:"password"}},[e._v("Senha: ")]),e._v(" "),a("md-input",{attrs:{type:"password",name:"password",autocomplete:"password",id:"password",disabled:e.sending},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),e.$v.form.password.required?e.$v.form.password.minLength?e._e():a("span",{staticClass:"md-error"},[e._v("A senha deve ter mais de 6 caracteres")]):a("span",{staticClass:"md-error"},[e._v("É necessário informar uma senha")])],1)],1),e._v(" "),a("div",{staticClass:"md-layout-item md-medium-size-100"},[a("md-field",{class:e.getValidationClass("password_confirmation")},[a("label",{attrs:{for:"password_confirmation"}},[e._v("Confirme senha: ")]),e._v(" "),a("md-input",{attrs:{type:"password",name:"password_confirmation",autocomplete:"password_confirmation",id:"password_confirmation",disabled:e.sending},model:{value:e.form.password_confirmation,callback:function(t){e.$set(e.form,"password_confirmation",t)},expression:"form.password_confirmation"}}),e._v(" "),e.$v.form.password_confirmation.required?e.$v.form.password_confirmation.sameAs?e._e():a("span",{staticClass:"md-error"},[e._v("As senhas não são iguais")]):a("span",{staticClass:"md-error"},[e._v("É necessário confirmar a senha")])],1)],1)])]),e._v(" "),e.sending?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),e._v(" "),a("md-card-actions",[a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:e.sending},on:{click:e.validateUser}},[e._v(" Cadastrar ")])],1),e._v(" "),a("md-snackbar",{attrs:{"md-position":"center","md-duration":1/0,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[a("span",[e._v("Ops, algo deu errado :( Por favor tente novamente mais tarde.")]),e._v(" "),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showSnackbar=!1}}},[e._v("Fechar")])],1)],1)},staticRenderFns:[]};var _=a("VU/8")(h,g,!1,function(e){a("5LpN")},null,null).exports,b=a("mtWM"),C={name:"sign-in",mixins:[m.validationMixin],data:function(){return{showSnackbar:!1,form:{email:"",password:""},sending:!1}},methods:l()({validateUser:function(){this.$v.$touch(),this.$v.$invalid||(this.sending=!0,this.doLogin())},getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},doLogin:function(){var e=this;b.post("https://sabre-api.herokuapp.com/api/v1/sign_in",{email:this.form.email,password:this.form.password}).then(function(t){return e.userCreated(t)}).catch(this.requestError)},userCreated:function(e){this.loadUser(e.data),this.$cookie.set("SecureToken",e.data.token,30);var t=this.$route.query.redirect;t?z.push(t):z.push("/")},requestError:function(){this.sending=!1,this.showSnackbar=!0}},Object(f.b)(["loadUser"])),validations:{form:{email:{required:p.required,email:p.email},password:{required:p.required}}},created:function(){this.$store.state.isLogged&&z.push("/")}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-card-content",[a("div",{staticClass:"md-layout md-gutter"},[a("div",{staticClass:"md-layout-item md-medium-size-100"},[a("md-field",{class:e.getValidationClass("email")},[a("label",{attrs:{for:"email"}},[e._v("E-mail: ")]),e._v(" "),a("md-input",{attrs:{type:"email",name:"email",autocomplete:"email",id:"email",disabled:e.sending},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),e.$v.form.email.required?e.$v.form.email.email?e._e():a("span",{staticClass:"md-error"},[e._v("É necessário informar um e-mail valido")]):a("span",{staticClass:"md-error"},[e._v("É necessário informar um e-mail")])],1)],1),e._v(" "),a("div",{staticClass:"md-layout-item md-medium-size-100"},[a("md-field",{class:e.getValidationClass("password")},[a("label",{attrs:{for:"password"}},[e._v("Senha: ")]),e._v(" "),a("md-input",{attrs:{type:"password",name:"password",autocomplete:"password",id:"password",disabled:e.sending},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}}),e._v(" "),e.$v.form.password.required?e.$v.form.password.minLength?e._e():a("span",{staticClass:"md-error"},[e._v("A senha deve ter mais de 6 caracteres")]):a("span",{staticClass:"md-error"},[e._v("É necessário informar uma senha")])],1)],1)])]),e._v(" "),e.sending?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),e._v(" "),a("md-card-actions",[a("md-button",{staticClass:"md-primary",attrs:{type:"submit"},on:{click:e.validateUser}},[e._v(" Entrar ")])],1),e._v(" "),a("md-snackbar",{attrs:{"md-position":"center","md-duration":1/0,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[a("span",[e._v("Por favor verifique o e-mail e a senha")]),e._v(" "),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showSnackbar=!1}}},[e._v("Fechar")])],1)],1)},staticRenderFns:[]};var y=a("VU/8")(C,k,!1,function(e){a("bQ6b")},null,null).exports;i.default.component("sign-up",_),i.default.component("sign-in",y);var w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(e){e.preventDefault()}}},[a("md-card",{staticClass:"md-layout-item md-size-50 md-xsmall-size-90 md-small-size-50 md-medium-size-40 md-large-size-25 md-xlarge-size-15 sign-card"},[a("md-card-header",[a("md-tabs",{attrs:{"md-alignment":"centered"}},[a("md-tab",{attrs:{id:"signin","md-label":"Entrar"},on:{click:function(t){e.signup=!1}}}),e._v(" "),a("md-tab",{staticClass:"mutted",attrs:{id:"signup","md-label":"Cadastrar"},on:{click:function(t){e.signup=!0}}})],1)],1),e._v(" "),e.signup?a("sign-up"):a("sign-in")],1)],1)])},staticRenderFns:[]};var $=a("VU/8")({name:"sign",data:function(){return{signup:!1}}},w,!1,function(e){a("iDUj")},null,null).exports,q=a("tl5J"),x={name:"sendRecipe",mixins:[m.validationMixin],data:function(){return{showSnackbar:!1,sending:!1,showRecipeCreated:!1,categories:{},form:{name:"",ingredients:"",directions:"",category_id:null,cover:null}}},methods:{validateRecipe:function(){this.$v.$touch(),this.$v.$invalid||(this.sending=!0,this.createRecipe())},createRecipe:function(){var e=this.$cookie.get("SecureToken");this.remote.users.recipe.create(e,this.form,this.recipeCreated,this.requestError)},recipeCreated:function(e){this.showRecipeCreated=!0},requestError:function(){this.sending=!1,this.showSnackbar=!0},getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},loadCategories:function(e){this.categories=e.data},fileChange:function(e){this.sending=!0,this.getBase64(e.files[0])},getBase64:function(e){var t=this,a=new FileReader;a.readAsDataURL(e),a.onload=function(){t.sending=!1,t.form.cover=a.result},a.onerror=function(e){console.log("Error: ",e)}}},components:{dashboard:q.a},validations:{form:{name:{required:p.required},ingredients:{required:p.required},directions:{required:p.required},category_id:{required:p.required}}},created:function(){this.remote.categories.index(this.loadCategories,function(e){return console.log("error loading categories",e)})}},R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dashboard",{attrs:{title:"Enviar receita"}},[e.showRecipeCreated?a("md-card",{staticClass:"md-layout-item md-size-50 md-small-size-90 center-vertically center-horizontally"},[a("md-card-header",[a("div",{staticClass:"md-title center-align"},[e._v("\n          Sua receita foi enviada. "),a("br"),e._v("\n          Obrigado!\n        ")])])],1):a("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(e){e.preventDefault()}}},[a("md-card",{staticClass:"md-layout-item md-size-80 md-small-size-90 md-xlarge-size-60 sign-card"},[a("md-card-header",[a("div",{staticClass:"md-title"},[e._v("Cadastro de Receitas")])]),e._v(" "),a("md-card-content",[a("md-field",[a("label",[e._v("Foto")]),e._v(" "),a("md-file",{attrs:{placeholder:"Foto (opcional)",disabled:e.sending,accept:"image/x-png,image/jpeg"},on:{change:function(t){e.fileChange(t.target)}}})],1),e._v(" "),a("md-field",{class:e.getValidationClass("name")},[a("label",[e._v("Nome da receita")]),e._v(" "),a("md-input",{attrs:{required:"",disabled:e.sending},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),e.$v.form.name.required?e._e():a("span",{staticClass:"md-error"},[e._v("É necessário informar o nome da receita")])],1),e._v(" "),a("md-field",{class:e.getValidationClass("category_id")},[a("md-select",{attrs:{name:"category",id:"category",placeholder:"Categoria"},model:{value:e.form.category_id,callback:function(t){e.$set(e.form,"category_id",t)},expression:"form.category_id"}},e._l(e.categories,function(t){return a("md-option",{key:"cat"+t.id,attrs:{value:t.id}},[e._v("\n                      "+e._s(t.name))])})),e._v(" "),e.$v.form.category_id.required?e._e():a("span",{staticClass:"md-error"},[e._v("Ops, está faltando a categoria")])],1),e._v(" "),a("md-field",{class:e.getValidationClass("ingredients")},[a("label",[e._v("Ingredientes")]),e._v(" "),a("md-textarea",{attrs:{id:"text-ingredients",required:"",disabled:e.sending},model:{value:e.form.ingredients,callback:function(t){e.$set(e.form,"ingredients",t)},expression:"form.ingredients"}}),e._v(" "),e.$v.form.ingredients.required?e._e():a("span",{staticClass:"md-error"},[e._v("Ops, está faltando os ingredientes")])],1),e._v(" "),a("md-field",{class:e.getValidationClass("directions")},[a("label",[e._v("Modo de preparo")]),e._v(" "),a("md-textarea",{attrs:{id:"text-directions",required:"",disabled:e.sending},model:{value:e.form.directions,callback:function(t){e.$set(e.form,"directions",t)},expression:"form.directions"}}),e._v(" "),e.$v.form.directions.required?e._e():a("span",{staticClass:"md-error"},[e._v("Ops, está faltando modo de preparo")])],1)],1),e._v(" "),e.sending?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),e._v(" "),a("md-card-actions",[a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:e.sending},on:{click:e.validateRecipe}},[e._v(" Enviar ")])],1)],1),e._v(" "),a("md-snackbar",{attrs:{"md-position":"center","md-duration":1/0,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[a("span",[e._v("Ops, algo deu errado :( Por favor tente novamente mais tarde.")]),e._v(" "),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showSnackbar=!1}}},[e._v("Fechar")])],1)],1)],1)},staticRenderFns:[]};var S=a("VU/8")(x,R,!1,function(e){a("QwKG")},"data-v-5a8b380c",null).exports,E={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n    Página nâo encontrada\n")])},staticRenderFns:[]},M=a("VU/8")(null,E,!1,null,null,null).exports,A={data:function(){return{title:"Minha Conta"}},components:{dashboardFrame:q.a}},U={render:function(){var e=this.$createElement,t=this._self._c||e;return t("dashboard-frame",{attrs:{title:this.title}},[t("div",{attrs:{id:"dashboard-index"}},[this._v("dashboard index placeholder")])])},staticRenderFns:[]},F=a("VU/8")(A,U,!1,null,null,null).exports,L=a("ypr2"),T={data:function(){return{title:"Receitas",loading:!0,recipes:[],recipesFilter:"my",disableFilterWatch:!0,searchQuery:""}},computed:{isAdmin:function(){return this.$store.state.isAdmin}},methods:{loadRecipes:function(){this.loading=!0;var e={};switch(this.recipesFilter){case"waiting_activation":e.status="waiting_activation";case"all":e.all_users=1}this.searchQuery&&(e.q=this.searchQuery);var t=this.$cookie.get("SecureToken");this.remote.users.recipe.index(t,e,this.recipesLoaded,function(e){return console.log(e)})},recipesLoaded:function(e){this.recipes=e.data,this.loading=!1}},components:{dashboardFrame:q.a,recipeCard:n.a,centerContent:L.a,Loading:s.a},created:function(){this.isAdmin&&(this.recipesFilter="waiting_activation",this.disableFilterWatch=!1),this.loadRecipes()},watch:{recipesFilter:function(){this.disableFilterWatch||this.loadRecipes()}}},O={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dashboard-frame",{attrs:{title:e.title}},[a("div",[e.loading?a("loading"):a("div",[e.isAdmin?a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-size-80 recipe-filter"},[a("md-radio",{attrs:{value:"all"},model:{value:e.recipesFilter,callback:function(t){e.recipesFilter=t},expression:"recipesFilter"}},[e._v("Todas As Receitas")]),e._v(" "),a("md-radio",{attrs:{value:"waiting_activation"},model:{value:e.recipesFilter,callback:function(t){e.recipesFilter=t},expression:"recipesFilter"}},[e._v("Receitas Para Aprovar")]),e._v(" "),a("md-radio",{attrs:{value:"my"},model:{value:e.recipesFilter,callback:function(t){e.recipesFilter=t},expression:"recipesFilter"}},[e._v("Minhas Receitas")])],1)]):e._e(),e._v(" "),a("div",{staticClass:"md-layout"},[a("div",{staticClass:"md-layout-item md-size-80 recipe-filter"},[a("md-field",[a("md-input",{attrs:{placeholder:"Procurar por nome"},on:{keypress:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.loadRecipes(t):null}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),a("md-button",{staticClass:"md-icon-button",on:{click:e.loadRecipes}},[a("md-icon",[e._v("search")])],1)],1)],1)]),e._v(" "),e._l(e.recipes,function(e){return a("recipe-card",{key:"recipe"+e.id,attrs:{showAdminEdit:!0,recipe:e}})})],2)],1)])},staticRenderFns:[]};var V=a("VU/8")(T,O,!1,function(e){a("HpXc")},"data-v-4a715bc9",null).exports,D={mixins:[m.validationMixin],data:function(){return{title:"Receita",loading:!0,sending:!1,showSnackbar:!1,snackMessage:"",form:{},cover:null}},methods:{getValidationClass:function(e){var t=this.$v.form[e];if(t)return{"md-invalid":t.$invalid&&t.$dirty}},validateRecipe:function(){console.log("todo: validateRecipe"),this.$v.$touch(),this.$v.$invalid||(this.sending=!0,this.updateRecipe())},updateRecipe:function(){var e=this.$cookie.get("SecureToken"),t=l()({},this.form);t.cover=this.cover,this.remote.users.recipe.update(e,t,this.recipeUpdated,this.requestError)},recipeUpdated:function(e){this.snackMessage="Receita atualizada.",this.showSnackbar=!0,console.log(e.data),setTimeout(function(){z.push({name:"dashboard.recipes"})},5e3)},requestError:function(){this.snackMessage="Ops, algo deu errado :( Por favor tente novamente mais tarde.",this.showSnackbar=!0},fileChange:function(e){this.sending=!0,this.getBase64(e.files[0])},getBase64:function(e){var t=this,a=new FileReader;a.readAsDataURL(e),a.onload=function(){t.sending=!1,t.cover=a.result},a.onerror=function(e){console.log("Error: ",e)}}},components:{dashboardFrame:q.a,centerContent:L.a},created:function(){var e=this,t=this.$cookie.get("SecureToken");this.remote.users.recipe.show(t,this.$route.params.id,function(t){e.form=t.data,e.loading=!1,e.title="Receita #"+e.$route.params.id+" - "+e.form.name},function(e){return console.log(e)})},validations:{form:{name:{required:p.required},ingredients:{required:p.required},directions:{required:p.required}}}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("dashboard-frame",{attrs:{title:e.title}},[a("form",{staticClass:"md-layout",attrs:{novalidate:""},on:{submit:function(e){e.preventDefault()}}},[a("md-card",{staticClass:"md-layout-item md-size-80 md-small-size-90 sign-card"},[a("md-card-header",[a("div",{staticClass:"md-title"},[e._v(e._s(e.title))])]),e._v(" "),a("md-card-content",[a("md-field",[a("label",[e._v("Foto")]),e._v(" "),a("md-file",{attrs:{placeholder:"Foto (opcional)",disabled:e.sending,accept:"image/x-png,image/jpeg"},on:{change:function(t){e.fileChange(t.target)}}})],1),e._v(" "),a("md-field",{class:e.getValidationClass("name")},[a("label",[e._v("Nome da receita")]),e._v(" "),a("md-input",{attrs:{required:"",disabled:e.sending||e.loading},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),e.$v.form.name.required?e._e():a("span",{staticClass:"md-error"},[e._v("É necessário informar o nome da receita")])],1),e._v(" "),a("md-field",{class:e.getValidationClass("ingredients")},[a("label",[e._v("Ingredientes")]),e._v(" "),a("md-textarea",{attrs:{id:"text-ingredients",required:"",disabled:e.sending||e.loading},model:{value:e.form.ingredients,callback:function(t){e.$set(e.form,"ingredients",t)},expression:"form.ingredients"}}),e._v(" "),e.$v.form.ingredients.required?e._e():a("span",{staticClass:"md-error"},[e._v("Ops, está faltando os ingredientes")])],1),e._v(" "),a("md-field",{class:e.getValidationClass("directions")},[a("label",[e._v("Modo de preparo")]),e._v(" "),a("md-textarea",{attrs:{id:"text-directions",required:"",disabled:e.sending||e.loading},model:{value:e.form.directions,callback:function(t){e.$set(e.form,"directions",t)},expression:"form.directions"}}),e._v(" "),e.$v.form.directions.required?e._e():a("span",{staticClass:"md-error"},[e._v("Ops, está faltando modo de preparo")])],1),e._v(" "),a("div",[a("md-radio",{attrs:{disabled:e.sending||e.loading,value:0},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("Aguardando Ativação")]),e._v(" "),a("md-radio",{attrs:{disabled:e.sending||e.loading,value:1},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("Ativo")]),e._v(" "),a("md-radio",{attrs:{disabled:e.sending||e.loading,value:2},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("Pausado")]),e._v(" "),a("md-radio",{attrs:{disabled:e.sending||e.loading,value:4},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[e._v("Rejeitado")])],1)],1),e._v(" "),e.sending||e.loading?a("md-progress-bar",{attrs:{"md-mode":"indeterminate"}}):e._e(),e._v(" "),a("md-card-actions",[a("md-button",{staticClass:"md-primary",attrs:{type:"submit",disabled:e.sending||e.loading},on:{click:e.validateRecipe}},[e._v(" Enviar ")])],1)],1),e._v(" "),a("md-snackbar",{attrs:{"md-position":"center","md-duration":1/0,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[a("span",[e._v(e._s(e.snackMessage))]),e._v(" "),a("md-button",{staticClass:"md-primary",on:{click:function(t){e.showSnackbar=!1}}},[e._v("Fechar")])],1)],1)])},staticRenderFns:[]};var N=a("VU/8")(D,I,!1,function(e){a("NOwC")},"data-v-f9613960",null).exports;i.default.use(r.a);var z=t.a=new r.a({mode:"history",routes:[{path:"/",name:"index",component:c},{path:"/sign",name:"sign",component:$},{path:"/painel/enviar-receita",name:"sendRecipe",component:S,meta:{requiresAuth:!0}},{path:"/painel",name:"dashboardIndex",component:F,meta:{requiresAuth:!0}},{path:"/painel/receitas",name:"dashboard.recipes",component:V,meta:{requiresAuth:!0}},{path:"/painel/receitas/:id",name:"dashboard.recipes.edit",component:N,meta:{requiresAuth:!0}},{path:"/receita/:id/:friendlyUrl",name:"recipe.show",component:function(){return a.e(0).then(a.bind(null,"mDmC"))}},{path:"/categoria/:id/:friendlyUrl",name:"category",component:c},{path:"/painel/users",name:"dashboard.users",component:function(){return a.e(1).then(a.bind(null,"+u/8"))},meta:{requiresAuth:!0}},{path:"/painel/users/:id/edit",name:"dashboard.users.edit",component:function(){return a.e(3).then(a.bind(null,"WDuK"))},meta:{requiresAuth:!0}},{path:"/painel/users/new",name:"dashboard.users.new",component:function(){return a.e(2).then(a.bind(null,"boDw"))},meta:{requiresAuth:!0}},{path:"/painel/favoritos",name:"dashboard.favorites",component:function(){return a.e(4).then(a.bind(null,"FtOe"))},meta:{requiresAuth:!0}},{path:"*",component:M}]})},bQ6b:function(e,t){},giDI:function(e,t){},iDUj:function(e,t){},ks6x:function(e,t,a){"use strict";var i={components:{centerContent:a("ypr2").a}},r={render:function(){var e=this.$createElement,t=this._self._c||e;return t("center-content",{staticStyle:{"margin-top":"10%"}},[t("md-progress-spinner",{attrs:{"md-diameter":200,"md-stroke":10,"md-mode":"indeterminate"}})],1)},staticRenderFns:[]},n=a("VU/8")(i,r,!1,null,null,null);t.a=n.exports},r3Yp:function(e,t){},rEVH:function(e,t,a){"use strict";var i={filters:{timePassed:function(e){var t=new Date(e),a=new Date,i=Math.abs(a.getTime()-t.getTime()),r=Math.round(i/864e5);if(0===r)return"hoje";if(1===r)return"1 dia";if(r<30)return r+" dias";var n=Math.round(r/30);return 1===n?"1 mês":n+" meses"}}};t.a=i},tl5J:function(e,t,a){"use strict";var i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("md-app",[a("md-app-toolbar",{staticClass:"md-primary"},[a("span",{staticClass:"md-title"},[e._v(e._s(e.frameTitle))])]),e._v(" "),a("md-app-drawer",{attrs:{"md-permanent":"card"}},[a("md-list",[a("md-list-item",{attrs:{to:{name:"dashboardIndex"}}},[a("md-icon",[e._v("note")]),e._v(" "),a("span",{staticClass:"md-list-item-text"},[e._v("Inicio")])],1),e._v(" "),a("md-list-item",{attrs:{to:{name:"dashboard.favorites"}}},[a("md-icon",[e._v("favorite")]),e._v(" "),a("span",{staticClass:"md-list-item-text"},[e._v("Favoritos")])],1),e._v(" "),e.isAdmin?a("md-list-item",{attrs:{to:{name:"dashboard.recipes"}}},[a("md-icon",[e._v("receipt")]),e._v(" "),a("span",{staticClass:"md-list-item-text"},[e._v("Receitas")])],1):a("md-list-item",{attrs:{to:{name:"dashboard.recipes"}}},[a("md-icon",[e._v("receipt")]),e._v(" "),a("span",{staticClass:"md-list-item-text"},[e._v("Minhas Receitas")])],1),e._v(" "),e.isAdmin?a("md-list-item",{attrs:{to:{name:"dashboard.users"}}},[a("md-icon",[e._v("people")]),e._v(" "),a("span",{staticClass:"md-list-item-text"},[e._v("Usuários")])],1):e._e()],1)],1),e._v(" "),a("md-app-content",[e._t("default")],2)],1)],1)},staticRenderFns:[]};var r=a("VU/8")({props:["title"],computed:{frameTitle:function(){return this.title?this.title:"Dashboard"},isAdmin:function(){return this.$store.state.isAdmin}}},i,!1,function(e){a("77D8")},"data-v-541ee060",null);t.a=r.exports},ypr2:function(e,t,a){"use strict";var i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"center-content"},[t("div",{staticClass:"content-to-center",style:{width:this.computedWidth,height:this.computedHeight}},[this._t("default")],2)])},staticRenderFns:[]};var r=a("VU/8")({props:["width","height"],computed:{computedWidth:function(){return this.width?this.width:"200px"},computedHeight:function(){return this.height?this.height:"200px"}}},i,!1,function(e){a("+0ln")},"data-v-43370d58",null);t.a=r.exports}},["NHnr"]);
//# sourceMappingURL=app.84cbeb52279ab500c926.js.map