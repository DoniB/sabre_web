webpackJsonp([0],{"0QTj":function(t,e){},"3QKG":function(t,e){},mDmC:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("ks6x"),a=i("rEVH"),n={mixins:[a.a],props:["comment"],computed:{isAdmin:function(){return this.$store.state.isAdmin}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment"},[i("p",[i("span",{staticClass:"comment-text"},[i("span",{staticClass:"mutted"},[t._v(t._s(t.comment.username||"Usuário")+"\n      "),t.isAdmin?i("router-link",{staticClass:"edit-user-link",attrs:{tag:"a",to:{name:"DashboardRecipesWaitingActivationEdit",params:{id:1}}}},[i("md-icon",[t._v("edit")])],1):t._e()],1),t._v("\n      "+t._s(t.comment.text)+"\n      "),i("span",{staticClass:"mutted comment-time"},[t._v(t._s(t._f("timePassed")(t.comment.created_at)))]),t._v(" "),t.isAdmin?i("router-link",{staticClass:"delete-comment-link",attrs:{tag:"a",to:{name:"DashboardRecipesWaitingActivationEdit",params:{id:1}}}},[i("md-icon",[t._v("delete")])],1):t._e()],1)])])},staticRenderFns:[]};var d=i("VU/8")(n,r,!1,function(t){i("xGSk")},"data-v-031160b5",null).exports,o=i("YaEn"),c={props:["recipeId"],data:function(){return{text:"",sendClicked:!1,disableSend:!1,notCommented:!0,comments:[]}},methods:{sendComment:function(){if(this.sendClicked=!0,!this.invalidMessage){this.disableSend=!0;var t=this.$cookie.get("SecureToken");this.remote.recipes.comments.create(t,this.recipeId,this.text,this.commentCreated,this.commentErrorCreating)}},commentCreated:function(t){this.notCommented=!1,this.text=t.data.text,this.comments.push(t.data),window.scrollTo(0,document.body.scrollHeight)},commentErrorCreating:function(t){this.disableSend=!1,console.log("error",t)},canComment:function(){this.isAuth()||o.a.push({path:"/sign",query:{redirect:o.a.currentRoute.fullPath}})}},computed:{invalidMessage:function(){return this.sendClicked&&this.text.length<10}},created:function(){var t=this;this.remote.recipes.comments.index(this.recipeId,function(e){t.comments=e.data})},components:{Comment:d}},m={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("md-card",{staticClass:"md-primary",attrs:{"md-theme":"comment-card"}},[i("md-card-content",[t.notCommented?i("div",[i("md-card-header",{staticClass:"md-transparent"},[i("h3",{staticClass:"md-title"},[t._v("Comentários")])]),t._v(" "),i("br"),t._v(" "),i("md-field",{class:{"md-invalid":t.invalidMessage}},[i("label",[t._v("Seu comentário")]),t._v(" "),i("md-textarea",{attrs:{required:"","md-autogrow":""},on:{focus:t.canComment},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),i("span",{staticClass:"md-helper-text"},[t._v("Deixe sua opinião sobre esta receita")]),t._v(" "),i("span",{staticClass:"md-error"},[t._v("A mensagem deve ter no mínimo 10 caracteres")])],1),t._v(" "),i("div",{staticClass:"pull-rigth"},[i("md-button",{attrs:{disabled:t.disableSend},on:{click:t.sendComment}},[t._v("Comentar")])],1)],1):t._e(),t._v(" "),i("md-divider"),t._v(" "),t._l(t.comments,function(t){return i("comment",{key:"com"+t.id,attrs:{comment:t}})})],2)],1)},staticRenderFns:[]};var l=i("VU/8")(c,m,!1,function(t){i("0QTj")},"data-v-ad58450a",null).exports,u=i("X+2x"),p={props:["recipeId","averageStars"],data:function(){return{stars:0}},methods:{ratingSelected:function(t){this.isAuth()?this.remote.recipes.rating.create(this.recipeId,t,this.$cookie.get("SecureToken"),this.loadUserRating,this.loadUserRatingError):o.a.push({path:"/sign",query:{redirect:o.a.currentRoute.fullPath}})},loadUserRating:function(t){t.data&&(this.stars=t.data.stars)},loadUserRatingError:function(t){console.log(t)}},created:function(){this.stars=this.averageStars,this.isAuth()&&this.remote.recipes.rating.show(this.recipeId,this.$cookie.get("SecureToken"),this.loadUserRating,this.loadUserRatingError)},components:{StarRating:i.n(u).a}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("star-rating",{attrs:{"star-size":25,"rounded-corners":"","show-rating":!1,padding:1},on:{"rating-selected":t.ratingSelected},model:{value:t.stars,callback:function(e){t.stars=e},expression:"stars"}})],1)},staticRenderFns:[]},h=i("VU/8")(p,v,!1,null,null,null).exports,_=i("mtWM"),g={mixins:[a.a],data:function(){return{recipe:{},isLoading:!0}},computed:{isAdmin:function(){return this.$store.state.isAdmin}},methods:{setRecipe:function(t){this.recipe=t.data,this.isLoading=!1,console.log(this.recipe)}},created:function(){_.get("https://sabre-api.herokuapp.com/api/v1/recipes/"+this.$route.params.id).then(this.setRecipe).catch(function(t){console.log(t)})},components:{Loading:s.a,Comments:l,Rating:h}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isLoading?i("loading"):i("div",{staticClass:"md-layout md-gutter md-alignment-top-center"},[i("md-card",{staticStyle:{"max-width":"680px"}},[i("md-card-media",[i("img",{attrs:{src:"/static/img/demo.jpg",alt:"Demo"}}),t._v(" "),t.isAdmin?i("md-button",{staticClass:"md-fab md-fab-top-left",attrs:{to:{name:"dashboard.recipes.edit",params:{id:t.recipe.id}}}},[i("md-icon",[t._v("edit")])],1):t._e(),t._v(" "),i("md-button",{staticClass:"md-fab md-fab-top-right md-mini md-accent"},[i("md-icon",[t._v("favorite_border")])],1)],1),t._v(" "),i("md-card-header",[i("div",{staticClass:"md-title"},[t._v(t._s(t.recipe.name))]),t._v(" "),i("div",{staticClass:"md-subhead"},[t._v("\n          "+t._s(t.recipe.owner)+"\n          "),t.isAdmin?i("router-link",{staticClass:"edit-user-link",attrs:{tag:"a",to:{name:"dashboard.users.edit",params:{id:t.recipe.user_id}}}},[i("md-icon",[t._v("edit")])],1):t._e(),t._v(" "),i("div",{staticClass:"md-subhead recipe-date"},[t._v(t._s(t._f("timePassed")(t.recipe.created_at)))])],1)]),t._v(" "),i("md-card-actions",[i("rating",{attrs:{recipeId:t.recipe.id,averageStars:t.recipe.average_stars}})],1),t._v(" "),i("md-card-content",{attrs:{id:"recipe-content"}},[i("div",[i("md-toolbar",{staticClass:"md-transparent"},[i("h3",{staticClass:"md-title"},[t._v("Ingredientes")])]),t._v(" "),i("br"),t._v(" "),i("ul",t._l(t.recipe.ingredients.split("\n"),function(e,s){return e?i("li",{key:"ing"+s},[t._v("\n              "+t._s(e)+"\n            ")]):t._e()})),t._v(" "),i("br"),i("br")],1),t._v(" "),i("div",[i("md-toolbar",{staticClass:"md-transparent"},[i("h3",{staticClass:"md-title"},[t._v("Modo de preparo")])]),t._v(" "),i("br"),t._v(" "),i("ol",t._l(t.recipe.directions.split("\n"),function(e,s){return i("li",{key:"dir"+s},[t._v("\n              "+t._s(e)+"\n            ")])})),t._v(" "),i("br")],1)]),t._v(" "),i("md-card-content",[i("comments",{attrs:{recipeId:t.recipe.id}})],1)],1)],1)],1)},staticRenderFns:[]};var C=i("VU/8")(g,f,!1,function(t){i("3QKG")},"data-v-0d306975",null);e.default=C.exports},xGSk:function(t,e){}});
//# sourceMappingURL=0.ac03fc3bf6b49da203b2.js.map